!function(){$(function(){new i($(".preloader")),new o($(".search")),new s($(".mobile-frame")),$.each($(".menu"),function(){var t=$(window);t.outerWidth()<1200?new n($(this)):new a($(this))}),$.each($(".wishlist"),function(){new c($(this))}),$.each($(".basket"),function(){new e($(this)),new BasketCounter($(this))}),$.each($(".signup__form"),function(){new r($(this))})});var t=function(t){var e=t,n=$(".basket"),a=e.find(".basket__products-delete"),s=n.find(".basket__subtotal-price"),i=n.find(".basket__number"),o=new XMLHttpRequest,r=function(){a.on("click",function(){var t=$(this);u(t)})},c=function(t){var e=t,a=n.find(".basket__products-item").length-1;o=$.ajax({url:"php/basket-delete.php",data:{productId:e,productCount:a},dataType:"json",type:"GET",success:function(t){l(t)},error:function(t){"abort"!=t.statusText&&console.log("err")}})},l=function(t){0==t.count?(i.remove(),n.addClass("empty")):(s.html(t.subtotal),i.html(t.count))},u=function(t){var e=t,n=e.parents(".basket__products-item"),a=e.data("id");n.css({height:0,"margin-bottom":0}),c(a),setTimeout(function(){n.remove()},400)},d=function(){r()};d()},e=function(e){var n=e,a=n.find(".basket__btn"),s=n.find(".basket__popup"),i=s.find(".basket__subtotal-price"),o=s.find(".basket__products"),r=s.find(".basket__popup-close"),c=$(".site"),l=$(window),u=0,d=$("html, body"),f=new XMLHttpRequest,p=function(){c.on("click",function(t){n.hasClass("active")&&0==$(t.target).closest(n).length&&v()}),a.on("click",function(){n.hasClass("active")?v():h()}),r.on("click",function(){return v(),!1})},h=function(){l.outerWidth()<768&&(u=l.scrollTop(),d.css("overflow-y","hidden"),c.css({position:"relative",top:u*-1})),n.addClass("active"),s.addClass("loading"),o.empty(),_()},v=function(){n.removeClass("active"),l.outerWidth()<768&&(d.removeAttr("style"),c.removeAttr("style"),l.scrollTop(u))},_=function(){f=$.ajax({url:"php/basket-cart.json",data:{},dataType:"json",type:"GET",success:function(t){0==t.count?n.addClass("empty"):m(t)},error:function(t){"abort"!=t.statusText&&console.log("err")}})},m=function(e){var n,a=e,r=a.subtotal,c=a.products;i.html(r),$.each(c,function(){n=w(this),o.append(n)}),s.removeClass("loading"),$.each($(".menu"),function(){new t(s.find(".basket__products-item"))})},w=function(t){var e=t,n=$('<li class="basket__products-item"></li>');return n.append('<div class="basket__products-pic"><img src="'+e.img+'" alt="img"/></div>'),n.append('<div class="basket__products-text"><span class="basket__products-name">'+e.title+'</span><div class="basket__products-order"><span class="basket__products-number">'+e.count+'</span>x<span class="basket__products-price">'+e.price+"</span></div></div>"),n.append('<div class="basket__products-col"><a href="#" data-id="'+e.id+'" class="basket__products-delete"><svg viewBox="0 0 17 16"><g><path d="M6.7,7.8L1.3,0H4c0.2,0,0.4,0,0.5,0.1c0.1,0.1,0.2,0.2,0.3,0.3l3.9,6C8.8,6.1,9,5.8,9.1,5.5l3.4-5.1 c0.1-0.1,0.2-0.3,0.3-0.4C13,0,13.1,0,13.3,0h2.6l-5.4,7.6l5.6,8.4h-2.7c-0.2,0-0.4-0.1-0.5-0.2c-0.1-0.1-0.2-0.3-0.3-0.4l-4-6.3 C8.4,9.5,8.3,9.7,8.2,10l-3.7,5.5c-0.1,0.1-0.2,0.3-0.3,0.4C4,15.9,3.8,16,3.6,16H1.1L6.7,7.8z"/></g></svg></a></div>'),n.attr("data-id="+e.id),n},b=function(){p()};b()},n=function(t){var e=t,n=e.find(".menu__main-wrap"),a=e.find(".menu__item"),s=($(window),$(".shipping"),0),i=function(){a.on("click",function(){var t=$(this),e=t.next(".menu__sub-menu");if(0!=e.length)return o(t),!1})},o=function(t){var n=t,a=n.next(".menu__sub-menu"),i=a.find(".menu__mobile-title-link");0==i.length&&r(a,n.text()),a.addClass("active").addClass("show"),s-=1,e.css({height:a.outerHeight(),left:a.outerWidth()*s})},r=function(t,e){var n=t,a=e;n.prepend('<div class="menu__mobile-title"><a href="#" class="menu__mobile-title-link"></a></div>');var s=n.find(".menu__mobile-title-link");s.html(a),s.on("click",function(){var t=$(this);return c(t),!1})},c=function(t){var n=t,a=n.parent(".menu__mobile-title").parent(".menu__sub-menu");s+=1,a.removeClass("active"),l(),e.css("left",a.outerWidth()*s),setTimeout(function(){a.removeClass("show")},300)},l=function(){var t=e.find(".active");e.outerHeight()<=t.last().outerHeight()&&e.addClass("growth"),0==t.length?e.css({height:n.outerHeight()+114}):e.css({height:t.last().outerHeight()}),setTimeout(function(){e.removeClass("growth")},300)},u=function(){i(),l()};u()},a=function(t){var e=t,n=e.find(".menu__main-wrap-item"),a=e.find(".menu__item"),s=e.find(".menu__carriage"),i=a.next(".menu__sub-menu"),o=$(".site"),r=(new XMLHttpRequest,function(){o.on("click",function(t){i.hasClass("show")&&0==$(t.target).closest(e).length&&u()}),a.on("click",function(){o.trigger("click");var t=$(this),e=t.next(".menu__sub-menu");return 0==e.length||e.hasClass("show")?(u(),!1):(c(t),!1)})}),c=function(t){var e=t,n=e.next(".menu__sub-menu");a.removeClass("active"),i.removeClass("show"),n.addClass("show"),e.addClass("active");var s=n.find(".menu__sub-menu-order");0==s.length&&(l(n),d(n),$.each(n.find(".new__products"),function(){new WishlistAddCount($(this)),$(this).removeClass("new__products")}),n.find(".menu__preloader").remove()),h()},l=function(t){var e=t;e.append('<div class="menu__preloader"><div class="preloader__spinner"><div></div><div></div><div></div><div></div><div></div></div></div>')},u=function(){a.removeClass("active"),i.removeClass("show"),p()},d=function(t){var e=[],n=t,a=n.find(".menu__sub-menu-item");$.each(a,function(){var t=$(this),n=t.data("order");e.push(n)});var s=Math.max.apply(Math,e);a.unwrap("ul");for(var i=0;i<s+1;i++)a.filter('[data-order="'+i+'"]').wrapAll('<ul class="menu__sub-menu-order"></ul>');var o=n.find(".menu__sub-menu-order");o.wrapAll('<div class="menu__order-group"></div>')},f=function(){e.append('<span class="menu__carriage"></span>'),s=e.find(".menu__carriage"),p()},p=function(){a.filter(".current").length>0?v():s.addClass("hide"),_()},h=function(){var t=a.filter(".active");s.css({left:t.offset().left-e.offset().left,width:t.outerWidth()})},v=function(){var t=a.filter(".current");s.css({left:t.offset().left-e.offset().left,width:t.outerWidth()})},_=function(){var t=e.find(".menu__carriage");n.on({mouseover:function(){var n=$(this),a=n.find(".menu__item");t.css({left:a.offset().left-e.offset().left,width:a.outerWidth()}),t.removeClass("hide")},mouseout:function(){var e=a.filter(".active"),n=a.filter(".current");e.length>0?h():n.length>0?v():t.addClass("hide")}})},m=function(){f(),r()};m()},s=function(t){var e=t,n=$(".menu-btn-mobile"),a=e.find(".menu-btn-close"),s=$("html, body"),i=$(".site"),o=($(window),function(){i.on("click",function(t){e.hasClass("visible")&&0==$(t.target).closest(e).length&&0==$(t.target).closest(n).length&&r()}),n.on("click",function(){c()}),a.on("click",function(){r()})}),r=function(){i.removeClass("open-menu"),s.removeAttr("style"),e.removeClass("visible")},c=function(){i.addClass("open-menu"),s.css("overflow-y","hidden"),e.addClass("visible")},l=function(){o()};l()},i=function(t){var e=($("html"),$("body"),t),n=function(){a()},a=function(){e.addClass("preloader_loaded"),setTimeout(function(){e.remove()},500)};n()},o=function(t){var e,n,a=t,s=a.find(".search__btn-open"),i=a.find(".search__btn-close"),o=a.find(".search__form"),r=o.find("input"),c=a.find(".search__popup"),l=a.find(".search__result-view"),u=l.find(".search__btn-view"),d=l.find(".search__btn-filter"),f=a.find(".search__result"),p=f.find(".search__result-count"),h=f.find(".search__result-value"),v=f.find(".search__result-wrap"),_=f.find(".search__result-scroll-wrap"),m=a.find(".search__popup-aside"),w=m.find(".search__popup-aside_wrap"),b=m.find(".search__popup-aside_tail"),g=0,C=$("html, body"),k=$(".site"),y=$(window),T=new XMLHttpRequest,x=function(){k.on("click",function(t){c.hasClass("show")&&0==$(t.target).closest(a).length&&X()}),s.on("click",function(){E()}),i.on("click",function(){return I(),!1}),b.on("click",function(){return m.hasClass("show")?q():M(),!1}),r.on({focus:function(){c.hasClass("show")||j()},keyup:function(t){return 27==t.keyCode?(X(),r.blur(),!1):void(27==t.keyCode&&40==t.keyCode&&38==t.keyCode&&13==t.keyCode||j())}}),u.on("click",function(){var t=$(this);P(t)}),d.on("click",function(){A()})},j=function(){c.addClass("load"),void 0==d.data("order")&&S(),T=$.ajax({url:"php/header-search.php",data:{value:r.val(),loadedCount:r.val().length,priceFilter:d.attr("data-order")},dataType:"json",type:"GET",success:function(t){H(t)},error:function(t){"abort"!=t.statusText&&console.log("err")}})},H=function(t){var e,n,a=t;c.removeClass("empty"),a.count>0?(p.html(a.count),""!=r.val()?h.html("for “"+r.val()+"”"):h.empty(),w.empty(),$.each(a.aside,function(){e=W(this),w.append(e)}),_.empty(),$.each(a.products,function(){n=L(this),_.append(n)})):c.addClass("empty"),R(),c.removeClass("load")},A=function(){"ASC"==d.attr("data-order")?(d.attr("data-order","DESC"),localStorage.setItem("searchPriceOrder","DESC")):(d.attr("data-order","ASC"),localStorage.setItem("searchPriceOrder","ASC")),j()},S=function(){var t=localStorage.getItem("searchPriceOrder"),e=d.attr("data-order");void 0==e&&null==t?d.attr("data-order","ASC"):null!=t&&d.attr("data-order",t)},W=function(t){var e=t,n=$('<dl class="open"></dl>'),a=$('<dt><svg viewBox="0 0 16 8"><path d="M2.2,0.3C1.9,0,1.4,0,1.1,0.3s-0.3,0.8,0,1.1l6.4,6.4c0.3,0.3,0.8,0.3,1.1,0l6.4-6.4c0.3-0.3,0.3-0.8,0-1.1 c-0.3-0.3-0.8-0.3-1.1,0L8,6.1L2.2,0.3L2.2,0.3z"/></svg></dt>'),s=$("<dd/>"),i=$("<ul/>");return a.prepend('<a href="#">'+e.catalog_title+"</a>"),$.each(e.catalog,function(){var t=this;i.append('<li><a href="'+t.link+'">'+t.item+"</a><span>"+t.count+"</span></li>")}),s.append(i),n.append(a),n.append(s),n},L=function(t){var e=t,n=$('<a class="search__item"></a>'),a=$('<div class="search__item-pic"></div>'),s=$('<div class="search__item-title"></div>'),i=$('<div class="search__item-price-list"></div>'),o=$('<span class="search__item-price"></span>'),r=$('<span class="search__item-old-price"></span>'),c=$('<div class="review-mark review-mark_2"></div>');if(a.append('<img src="'+e.pic+'" alt="'+e.title+'">'),s.html(e.title),o.html(e.price),e.old_price>0&&(r.html(e.old_price),i.append(o)),i.append(o),n.attr("href",e.link),n.append(a),n.append(s),n.append(i),e.mark>0){for(var l=0;l<e.mark;l++)c.append('<span class="active"></span>');for(l;l<5;l++)c.append("<span/>");n.append(c)}return n},M=function(){m.addClass("show")},q=function(){m.removeClass("show")},E=function(){o.addClass("show"),y.outerWidth()<992&&(g=y.scrollTop(),C.css("overflow-y","hidden"),k.css({position:"relative",top:g*-1})),setTimeout(function(){r.focus()},300)},I=function(){o[0].reset(),X(),o.removeClass("show"),y.outerWidth()<992&&(C.removeAttr("style"),k.removeAttr("style"),y.scrollTop(g))},R=function(){o.addClass("active"),c.addClass("show"),y.outerWidth()<1200&&(g=y.scrollTop(),C.css("overflow-y","hidden"),k.css({position:"relative",top:g*-1})),G(),B(),S(),O()},X=function(){y.outerWidth()<1200&&(C.removeAttr("style"),k.removeAttr("style"),y.scrollTop(g)),o.removeClass("active"),c.removeClass("show")},G=function(){var t=m.find("dt"),e=m.find("dd");e.each(function(){var t=$(this);t.css("height",t.outerHeight())}),t.on("click",function(){var t=$(this),e=t.parents("dl"),n=e.find("dd"),a=n.find("ul").outerHeight();e.hasClass("open")?(e.removeClass("open"),n.css("height",0)):(e.addClass("open"),n.css("height",a))})},P=function(t){var e=t,n=e.data("view"),a=u.filter(".active").data("view");localStorage.setItem("searchView",n),v.removeClass(a),u.removeClass("active"),e.addClass("active"),v.addClass(n)},B=function(){var t=localStorage.getItem("searchView"),e=u.filter(".active").data("view");void 0==e&&null==t?u.eq(0).trigger("click"):null!=t?u.filter("[data-view="+t+"]").trigger("click"):void 0!=e&&u.filter(".active").trigger("click")},O=function(){document.querySelector.bind(document);null!=e?e.update():e=new PerfectScrollbar(".search__popup-aside_wrap"),null!=n?n.update():n=new PerfectScrollbar(".search__result")},V=function(){x()};V()},r=function(t){var e=t,n=e.find("input[type=email]"),a=e.find(".signup__success"),s=e.attr("action"),i=new FormValidator(e),o=function(){r()},r=function(){e.on("submit",function(){return 1==i.valid&&c(),!1})},c=function(){return $.ajax({url:s,dataType:"html",timeout:2e4,type:"POST",data:{email:n.val()},success:function(){l()},error:function(t){"abort"!=t.statusText&&alert(t.statusText)}}),!1},l=function(){a.addClass("show"),e[0].reset(),setTimeout(function(){a.removeClass("show")},4e3)};o()},c=function(t){var e,n=t,a=this,s=new XMLHttpRequest,i=function(){s=$.ajax({url:"php/wish-list.php",data:{productId:0},dataType:"json",type:"GET",success:function(t){o(t.wish)},error:function(t){"abort"!=t.statusText&&console.log("err")}})},o=function(t){var a=t;e=n.find(".wishlist__number"),e.length>0?a>0?e.text(t):e.remove():a>0&&n.append('<span class="wishlist__number personal-bar__number">'+t+"</span>")},r=function(){i(),n[0].obj=a};a.reload=function(){i()},r()}}();var BasketCounter=function(t){var e,n=t.find(".basket__btn"),a=new XMLHttpRequest,s=function(){a=$.ajax({url:"php/basket-handler.php",data:{},dataType:"json",type:"GET",success:function(t){i(t.count)},error:function(t){"abort"!=t.statusText&&console.log("err")}})},i=function(t){var a=t;e=n.find(".basket__number"),e.length>0?a>0?e.text(t):e.remove():a>0&&n.append('<span class="basket__number">'+t+"</span>")},o=function(){s()};o()},WishlistAddCount=function(t){var e=$(".products__like"),n=new XMLHttpRequest,a=($(".site"),function(){e.on("click",function(){var t=$(this);return s(t),!1})}),s=function(t){var n=t,a=n.data("id");i(a),n.addClass("active"),e.filter('[data-id="'+a+'"]').addClass("active")},i=function(t){var e=t;n=$.ajax({url:"php/wish-list.php",data:{productId:e},dataType:"json",type:"GET",success:function(){$(".wishlist")[0].obj.reload()},error:function(t){"abort"!=t.statusText&&console.log("err")}})},o=function(){a()};o()};
!function(){"use strict";$(function(){new n($(".catalog__list")),$.each($(".catalog-navigation"),function(){new t($(this))}),$.each($(".filter"),function(){new o($(this))}),$.each($(".catalog__filter-select"),function(){new e($(this))})});var t=function(t){var n=t,o=n.offset().top,e=n.offset().left,i=n.find(".catalog-navigation__current-item"),s=n.find(".catalog-navigation__btn"),c=$(".site"),a=c.find(".catalog"),l=$("body"),f=$(window),r=0,u=function(){d(),g()},d=function(){c.on("click",function(t){n.hasClass("open")&&0==$(t.target).closest(n).length&&p(r)}),f.on({scroll:function(){g()},resize:function(){e=n.offset().left}}),i.on("click",function(){return n.hasClass("open")?p(r):v(),!1}),s.on("click",function(){var t=$(this),n=t.parent("li");return t.hasClass("open")?_(n):h(n),!1})},v=function(){r=f.scrollTop(),n.addClass("open"),setTimeout(function(){l.scrollTop(n.offset().top)},100),setTimeout(function(){l.css("overflow-y","hidden")},200)},p=function(t){r=t,l.removeAttr("style"),setTimeout(function(){l.scrollTop(r),g()},100),n.removeClass("open")},h=function(t){var n=t,o=n.find(".catalog-navigation__btn"),e=n.find(".catalog-navigation__sub-menu"),i=e.find("ul").outerHeight();o.addClass("open"),e.css("height",i)},_=function(t){var n=t,o=n.find(".catalog-navigation__btn"),e=n.find(".catalog-navigation__sub-menu");o.removeClass("open"),e.removeAttr("style")},g=function(){var t=a.offset().top+a.outerHeight()-n.outerHeight();l.scrollTop()>=o?(n.removeAttr("style"),m(),n.offset().top>=t&&n.css({position:"absolute",top:t-a.offset().top,left:0})):n.hasClass("open")||C()},m=function(){n.addClass("fixed"),n.css("left",e)},C=function(){n.removeClass("fixed"),n.css("left",0)};u()},n=function(t){var n=t,o=n.find(".products__item"),e=$(window),i=function(){c(),e.outerWidth()>568&&s()},s=function(){var t=n.outerWidth(),e=o.outerWidth(),i=0,s=0;s=Math.floor(t/e),i=t-e*s,i/=s-1,i<5&&(s-=1,i=t-e*s,i/=s-1),o.css("margin-right",i),n.css("margin-right",i*-1)},c=function(){e.on("resize",function(){n.removeAttr("style"),o.removeAttr("style"),e.outerWidth()>568&&s()})};i()},o=function(t){var n=t,o=$(".catalog__filter-all"),e=n.find(".filter__close"),i=n.find(".filter__item"),s=n.find(".filter__clear-all"),c=i.find(".filter__item-clear"),a=i.find(".filter__item-topic"),l=0,f=$(window),r=$("body"),u=$(".site"),d=function(){v()},v=function(){n.on("click",function(t){0==$(t.target).closest(i).length&&m()}),o.on("click",function(){return g(),!1}),e.on("click",function(){return m(),!1}),a.on("click",function(){var t=$(this),n=t.parents(".filter__item");return n.hasClass("open")?_(n):h(n),!1}),s.on("click",function(){return p(n),!1}),c.on("click",function(){var t=$(this),n=t.parents(".filter__item");return p(n),!1})},p=function(t){var n=t,o=n.find("input[type=checkbox]");o.prop("checked",!1)},h=function(t){var n=t;n.addClass("open")},_=function(t){var n=t;n.removeClass("open")},g=function(){l=f.scrollTop(),r.css("overflow-y","hidden"),u.css({position:"relative",top:l*-1}),n.addClass("show")},m=function(){r.removeAttr("style"),u.removeAttr("style"),f.scrollTop(l),n.removeClass("show")};d()},e=function(t){var n=t,o=$(".catalog__filter-select"),e=$(".site"),i=function(){s()},s=function(){e.on("click",function(t){n.hasClass("open")&&0==$(t.target).closest(n).length&&c()}),n.on("click",function(){var t=$(this);t.hasClass("open")||a(t)})},c=function(){o.removeClass("open")},a=function(t){c();var n=t;n.addClass("open")};i()}}();
var FormValidator=function(t){var a=t,n=this,o=a.find("input, textarea"),i=a.find("[data-required]"),e=a.find("input[type=checkbox]"),s=a.find("input[type=radio]"),l=function(){c(),a[0].obj=n},d=function(){i.each(function(){var t=$(this);""!==t.val()&&t.is(":checked")||(t.addClass("not-touched"),f(t)),t.hasClass("valid")&&t.removeClass("not-touched")})},c=function(){i.on({focus:function(){$(this).removeClass("not-touched")},focusout:function(){var t=$(this);f(t)},keyup:function(){var t=$(this);t.hasClass("not-valid")&&f(t)}}),o.on({focusout:function(){var t=0;o.each(function(){var a=$(this);a.val().length>0&&(t+=1)}),0===t&&(o.removeClass("not-valid"),n.valid=!1)}}),a.on({submit:function(){if(d(),0!==i.filter(".not-valid").length&&(n.valid=!1),i.hasClass("not-touched")||i.hasClass("not-valid"))return a.find(".not-touched:first").focus(),a.find(".not-valid:first").focus(),n.valid=!1,!1}}),e.on("change",function(){$(this).removeClass("not-valid not-touched")}),s.on("change",function(){var t=$(this);t.removeClass("not-valid not-touched"),s.filter("[name="+t.attr("name")+"]").removeClass("not-valid not-touched")})},v=function(t){t.addClass("not-valid"),t.removeClass("valid")},r=function(t){t.removeClass("not-valid"),t.addClass("valid")},u=function(t){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)},f=function(t){var a=t.attr("type"),o=t[0].tagName;return("email"!==a&&"text"!==a&&"tel"!==a&&"password"!==a||""!==t.val())&&("email"!==a||u(t.val()))&&("checkbox"!==a||t.is(":checked"))&&("radio"!==a||t.is(":checked")||s.filter("[name="+t.attr("name")+"]").is(":checked"))?"textarea"==o.toLocaleLowerCase()&&""===t.val()?(v(t),n.valid=!1,!1):(r(t),void(0===i.filter(".not-valid").length&&(n.valid=!0))):(v(t),n.valid=!1,!1)};n.valid=!1,l()};